# io.github.magnush.mhWaveEdit.yml
app-id: io.github.magnush.mhWaveEdit
runtime: org.freedesktop.Platform
runtime-version: '23.08'
sdk: org.freedesktop.Sdk
command: mhwaveedit
rename-desktop-file: mhwaveedit.desktop

finish-args:
  - --socket=x11
  - --share=ipc
  - --device=dri
  - --filesystem=xdg-music
  - --socket=pulseaudio
  
modules:


- shared-modules/gtk2/gtk2.json 
- shared-modules/intltool/intltool-0.51.json
    
- name: gnome-themes-extra
  cleanup: 
    - /cache
    - /man
    - /share/aclocal
    - /share/devhelp
    - /include
    - /lib/pkgconfig
    - /share/gtk-doc
    - /share/man
    - /lib/*.a
    - '*.a'
    - '*.la'
    
  buildsystem: autotools
  sources:
  - type: archive
    url:  http://download.gnome.org/sources/gnome-themes-extra/3.28/gnome-themes-extra-3.28.tar.xz
    sha256: 7c4ba0bff001f06d8983cfc105adaac42df1d1267a2591798a780bac557a5819
 
- name: mhwaveedit
  cleanup: 
    - /cache
    - /man
    - /share/aclocal
    - /share/devhelp
    - /include
    - /lib/pkgconfig
    - /share/gtk-doc
    - /share/man
    - /lib/*.a
    - '*.a'
    - '*.la'
    
  buildsystem: autotools
  sources:
  - type: git
    url: https://github.com/magnush/mhwaveedit
    commit: b0ae1edb86456f363e283bd740bbae01d58ae55c
    tag: v1.4.24
  - type: file
    path: mhwaveedit128.png
 # build-commands:
 #   - chmod +x gitcompile.sh
 #   - ./gitcompile.sh  --prefix=/app
 #   - make install 
  post-install:

   - install -Dm644 mhwaveedit128.png
     ${FLATPAK_DEST}/share/icons/hicolor/128x128/apps/io.github.magnush.mhWaveEdit.png
   - desktop-file-edit --set-icon=io.github.magnush.mhWaveEdit 
     /app/share/applications/mhwaveedit.desktop
